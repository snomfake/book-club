{% extends "index.html" %}

{% block content %}
  <div class="container mt-4">
		<!-- image book -->
    <div class="row">
      <div class="col-md-6">
        <div class="rounded overflow-hidden">
          <img src="{{ book.image_detail.url }}" alt="{{ book.title }}" class="img-fluid">
        </div>
      </div>

			<!-- info about book -->
      <div class="col-md-6">
        <div class="d-flex flex-column h-100 justify-content-center">
          <p class="mb-1">Name: <strong>{{ book.title }}</strong></p>
          <p class="mb-1">Author: <strong>{{ book.author }}</strong></p>
          <p class="mb-1">Genre: <strong>{{ book.genre }}</strong></p>
          <p class="mb-1">Publish: <strong>{{ book.publish_date }}</strong></p>
          <p class="mb-0">{{ book.body }}</p>
        </div>
      </div>
    </div>

		<br>
		<br>
		<p class="border-bottom border-white"></p>
		<br>

		<!-- comment form -->
		{% if request.user.is_authenticated %}
    <div class="row mt-3">
      <div class="col-md-12">
				<form action="{% url 'books:add_comment' book.slug %}" method="post">
					{% csrf_token %}
					<div class="form-group">
						<label for="exampleInputUsername">Username</label>
						<input name="username" type="text" class="form-text text-muted also-bg" id="exampleInputUsername" placeholder="Enter username">
					</div>
					<div class="form-group">
						<label for="exampleInputComment">Comment</label>
						<p>
							<textarea class="also-bg color-text" name="body" id="exampleInputComment" cols="115" rows="5"></textarea>
						</p>
						<button class="btn btn-outline-light" type="submit">Add comment <i class="bi bi-send-fill"></i></button>						
					</div>
        </form>
      </div>
    </div>
		{% else %}
			<div class="card also-bg">
				<div class="card-title text-center">
					Comments can only be left by authenticated users.
				</div>
			</div>
		{% endif %}

		<!-- list comments -->
		{% for comment in comments %}
		<div class="card border border-white also-bg">
			<div class="card-body">
				<h5 class="card-title">{{ comment.username }}</h5>
				<p class="card-text">{{ comment.body }}</p>
				<p class="card-text"><small class="text-muted">{{ comment.publish_date }}</small></p>
			</div>
		</div>
		{% endfor %}
  </div>
{% endblock content %}

